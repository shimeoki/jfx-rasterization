name: Publish Javadoc on GitHub Pages

on:
    push:
        branches:
          - main
    workflow_dispatch:

permissions:
    contents: read
    pages: write
    id-token: write

concurrency:
    group: pages
    cancel-in-progress: false

jobs:
    publish:
        runs-on: ubuntu-latest
        steps:
          - name: Publish Javadoc
            uses: MathieuSoysal/Javadoc-publisher.yml@v2.5.0
            with:
                java-version: 21
                GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
                deploy-mode: artifact
                project: gradle
                custom-command: gradle :lib:javadoc
